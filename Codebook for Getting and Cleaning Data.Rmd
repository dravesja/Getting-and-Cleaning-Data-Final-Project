---
title: "CODEBOOK.Rmd for Getting and Cleaning Data Final Project"
author: "JADraves"
date: "April 19, 2019"
output: html_document
---
This script contiains a desciption of all of the steps required for the completion of the final project in the course Getting and Cleaning Data.  

Data set acquired from the UCI site and placed in the folder **UCI HAR Dataset**
https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip

The **UCI HAR dataset** is the result of a study involving the Samsung Galaxy S smart phone and contains the signal data from the accelerometers in the phone.  The dataset contains both time domain data and frequency domain data.  The time domain data begins with the character "t" and consists of the measured signals.  These signals are Fast Fourier Transform (FFT) to produce the frequencey domain data which begins with the character "f".  The signal data was collected from 30 subjects as they performed the following acitivities: WALKING, WALKING_UPSTAIRS, WALKING_DOWNSTAIRS, SITTING, STANDING, and LAYING.  Subsets of the data were generated by random selection of participants with the first set, refered to as the test set, containing the data for 30% of the participants, and the second set, refered to as the train set, containing the data for the remaining 70% of participants.

##Loading packages
```{r, eval=FALSE} 
library(dplyr)
```
## 0. Reading data and creating similarly named data tables

```{r, eval=FALSE} 
fname <- "G&CData_Final_Project,zip""
# Downloading and checking to see if file exists

if (!file.exists(fname)){
  fURL <- "https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip"
  download.file(fURL, fname, method="curl") #file URL is fURL
}  

# Checking folder 
if (!file.exists("UCI HAR Dataset")) { 
  unzip(fname) 
}

#######        ORGANIZING DATA                  ########
feature <- read.table("UCI HAR Dataset/features.txt", col.names = c("n","variable"))
activity <- read.table("UCI HAR Dataset/activity_labels.txt", col.names = c("code", "activity"))

### Each row of subject_test containts the subject id ###
### Test data is 30% of data                          ###
subject_test <- read.table("UCI HAR Dataset/test/subject_test.txt", col.names = "subject")
X_test <- read.table("UCI HAR Dataset/test/X_test.txt", col.names = feature$variable)
y_test <- read.table("UCI HAR Dataset/test/y_test.txt", col.names = "code")

### Each row of subject_test containts the subject id  ###
### Training data is 70% of data                       ###
subject_train <- read.table("UCI HAR Dataset/train/subject_train.txt", col.names = "subject")
X_train <- read.table("UCI HAR Dataset/train/X_train.txt", col.names = feature$variable)
y_train <- read.table("UCI HAR Dataset/train/y_train.txt", col.names = "code")
```
##1. Merge training and test data sets
```{r, eval=FALSE} 
Xbind <- rbind(X_train, X_test)      #row binding test data
ybind <- rbind(y_train, y_test)      #row binding labels
Subid <- rbind(subject_train, subject_test) #row binding id's

### Merged file is called Working_Data and is constructed ###
### by column binding by subject id as follows:           ###
Working_Data <- cbind(Subid, ybind, Xbind)
```
##2. Extracting the mean and the standard deviation
```{r, eval=FALSE} 
Summary_Data <- Working_Data %>% select(subject, code, contains("mean"), contains("std"))
```
##3. Providing desciptive names for the activities
```{r, eval=FALSE} 
Summary_Data$code <- activity[Summary_Data$code, 2]
```
##4 Appropriately label the data set with desciptive names
```{r, eval=FALSE} 
names(Summary_Data)[2] = "activity"
names(Summary_Data)<-gsub("Acc", "Accelerometer", names(Summary_Data))
names(Summary_Data)<-gsub("Gyro", "Gyroscope", names(Summary_Data))
names(Summary_Data)<-gsub("BodyBody", "Body", names(Summary_Data))
names(Summary_Data)<-gsub("Mag", "Magnitude", names(Summary_Data))
names(Summary_Data)<-gsub("^t", "Time", names(Summary_Data))
names(Summary_Data)<-gsub("^f", "Frequency", names(Summary_Data))
names(Summary_Data)<-gsub("tBody", "TimeBody", names(Summary_Data))
names(Summary_Data)<-gsub("-mean()", "Mean", names(Summary_Data), ignore.case = TRUE)
names(Summary_Data)<-gsub("-std()", "STD", names(Summary_Data), ignore.case = TRUE)
names(Summary_Data)<-gsub("-freq()", "Frequency", names(Summary_Data), ignore.case = TRUE)
names(Summary_Data)<-gsub("angle", "Angle", names(Summary_Data))
names(Summary_Data)<-gsub("gravity", "Gravity", names(Summary_Data))
```
#5. Create a second, independent tidy data set called TidyData with the average of each variable for each activity and each subjsect
```{r, eval=FALSE} 
TidyData <- Summary_Data %>%
  group_by(subject, activity) %>%
  summarise_all(list(mean))
# output as .txt file with same name using row.name = FALSE
write.table(TidyData, "TidyData.txt", row.name=FALSE)
```
In the **TidyData** set, the rows contain the average data of the six activites for 30 participants while the columns are divided into 1 column of subject id's followed by means, and standard deviations.